model Appointment {
  id             String            @id @default(cuid())
  status         AppointmentStatus @default(REQUESTED)
  scheduledDate  DateTime
  notes          String?
  createdAt      DateTime          @default(now())
  updatedAt      DateTime          @updatedAt
  serviceOrderId String            @unique
  attendantId    String?
  availabilityId String?           @unique
  attendant      Employee?         @relation(fields: [attendantId], references: [id])
  availability   Availability?     @relation(fields: [availabilityId], references: [id])
  serviceOrder   ServiceOrder      @relation(fields: [serviceOrderId], references: [id], onDelete: Cascade)

  @@map("appointments")
}

model Availability {
  id            String       @id @default(cuid())
  date          DateTime
  timeSlot      String
  isAvailable   Boolean      @default(true)
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt
  appointmentId String?      @unique
  appointment   Appointment?

  @@unique([date, timeSlot])
  @@map("availabilities")
}
