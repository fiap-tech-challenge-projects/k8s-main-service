model ServiceOrder {
  id                 String             @id @default(cuid())
  status             ServiceOrderStatus @default(REQUESTED)
  requestDate        DateTime           @default(now())
  deliveryDate       DateTime?
  cancellationReason String?
  notes              String?
  createdAt          DateTime           @default(now())
  updatedAt          DateTime           @updatedAt
  clientId           String
  vehicleId          String
  appointment        Appointment?
  budget             Budget?
  serviceExecution   ServiceExecution? //TODO: maybe this could be an array of service executions
  client             Client             @relation(fields: [clientId], references: [id], onDelete: Cascade)
  vehicle            Vehicle            @relation(fields: [vehicleId], references: [id], onDelete: Cascade)
  vehicleEvaluation  VehicleEvaluation?

  @@map("service_orders")
}

model VehicleEvaluation {
  id             String       @id @default(cuid())
  details        Json         @default("{}")
  evaluationDate DateTime     @default(now())
  mechanicNotes  String?
  createdAt      DateTime     @default(now())
  serviceOrderId String       @unique
  vehicleId      String
  serviceOrder   ServiceOrder @relation(fields: [serviceOrderId], references: [id], onDelete: Cascade)
  vehicle        Vehicle      @relation(fields: [vehicleId], references: [id], onDelete: Cascade)

  @@map("vehicle_evaluations")
}
